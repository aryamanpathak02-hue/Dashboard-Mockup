<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Munshi. — Audio Intelligence for Teams</title>
  <link rel="stylesheet" href="style.css?v=16" />
</head>
<body>
  <div class="stencil-overlay" aria-hidden="true"></div>

  <!-- ── Header ── -->
  <header class="header">
    <div class="header-content">
      <h1 class="logo">Munshi.</h1>
      <nav class="nav">
        <a href="#" class="nav-link active" data-section="home">HOME</a>
        <a href="#" class="nav-link" data-section="collections">COLLECTIONS</a>
        <a href="#" class="nav-link" data-section="whispers">WHISPERS</a>
      </nav>
      <div class="header-actions">
        <button class="add-btn" id="createArchiveBtn" title="Create New Archive">+</button>
      </div>
    </div>
  </header>

  <!-- ══════════ HOME / LANDING ══════════ -->
  <section class="page-section" id="homeSection">

    <!-- Hero -->
    <div class="hero">
      <!-- Wave-to-text morph: canvas waveform dissolves into headline -->
      <div class="hero-morph">
        <canvas id="heroWaveCanvas" class="hero-wave-canvas"></canvas>
        <h2 class="headline" id="heroHeadline">Audio intelligence<br>for <span class="underline">teams</span></h2>
      </div>
      <p class="tagline">Because your audio is actually intelligent</p>
      <p class="description">Turn meetings, podcasts, and calls into searchable knowledge. One place to capture, transcribe, and recall what was said.</p>

      <!-- Upload -->
      <div class="upload-area" id="uploadArea">
        <input type="file" id="audioFileInput" accept="audio/*" hidden />
        <button class="upload-add-btn">+</button>
        <p class="upload-text">Drop audio here or click to upload</p>
        <p class="upload-hint">MP3, WAV, M4A supported</p>
      </div>
      <div class="upload-progress" id="uploadProgress" style="display:none;">
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        <p class="progress-text" id="progressText">Processing...</p>
      </div>
      <button class="create-btn" id="createBtn">Create archive &rarr;</button>
    </div>

    <!-- Recent archives (compact list) -->
    <div class="recent-section">
      <h3 class="section-title">Recent archives</h3>
      <div class="archives-container" id="archivesContainer"></div>
    </div>

    <!-- Client conveyor belt -->
    <div class="clients-section">
      <p class="clients-label">Trusted by teams at</p>
      <div class="clients-track-wrapper">
        <div class="clients-track" id="clientsTrack">
          <!-- duplicated by JS for infinite loop -->
        </div>
      </div>
    </div>
  </section>

  <!-- ══════════ COLLECTIONS ══════════ -->
  <section class="page-section" id="collectionsSection" style="display:none;">

    <!-- Grid landing -->
    <div id="collectionsLanding">
      <div class="collections-header">
        <h2 class="collections-title">Collections</h2>
        <p class="collections-sub">Search intelligently through millions of hours of audio</p>
      </div>
      <div class="collections-grid" id="collectionsGrid"></div>
    </div>

    <!-- Collection detail (shown after zoom) -->
    <div class="coll-detail" id="collectionDetail" style="display:none;">
      <button class="coll-back" id="collBack">&larr; Back to Collections</button>
      <div class="coll-detail-header" id="collDetailHeader">
        <div class="coll-detail-info">
          <span class="archive-tag" id="collDetailTag"></span>
          <h2 class="coll-detail-title" id="collDetailTitle"></h2>
          <p class="coll-detail-meta" id="collDetailMeta"></p>
        </div>
      </div>
      <div class="coll-search-wrap">
        <div class="coll-search">
          <span class="coll-search-icon">&#128269;</span>
          <input type="text" id="collSearchInput" class="coll-search-input" placeholder="Search through this collection..." autocomplete="off" />
        </div>
      </div>
      <div class="coll-episode-count" id="collEpisodeCount"></div>
      <div class="coll-episodes" id="collEpisodes"></div>
    </div>
  </section>

  <!-- ══════════ WHISPERS ══════════ -->
  <section class="page-section whispers-section" id="whispersSection" style="display:none;">
    <canvas id="bubblesCanvas" class="bubbles-canvas"></canvas>

    <!-- ── Landing: 3 immersive panels ── -->
    <div class="whispers-landing" id="whispersLanding">
      <div class="whispers-header">
        <h2 class="whispers-title">Whispers</h2>
        <p class="whispers-sub">You probably didn't know this:</p>
      </div>
      <div class="whisper-bento" id="whisperBento">
        <!-- Signal — large left -->
        <div class="bento-pane bento-signal" data-cat="signal">
          <div class="bento-glow"></div>
          <div class="bento-accent"></div>
          <canvas class="bento-viz" id="vizSignal"></canvas>
          <div class="bento-inner">
            <div class="bento-top">
              <span class="bento-icon">&#9650;</span>
              <span class="bento-count" id="bentoCountSignal" data-target="3">0</span>
            </div>
            <h3 class="bento-label">Signals</h3>
            <p class="bento-desc">Wins, positive trends, and momentum</p>
            <div class="bento-preview" id="bentoPreviewSignal"></div>
            <span class="bento-cta">Explore &rarr;</span>
          </div>
        </div>
        <!-- Alert — top right -->
        <div class="bento-pane bento-alert" data-cat="alert">
          <div class="bento-glow"></div>
          <div class="bento-accent"></div>
          <canvas class="bento-viz" id="vizAlert"></canvas>
          <div class="bento-inner">
            <div class="bento-top">
              <span class="bento-icon">&#9888;</span>
              <span class="bento-count" id="bentoCountAlert" data-target="3">0</span>
            </div>
            <h3 class="bento-label">Alerts</h3>
            <p class="bento-desc">Risks, negative sentiment, red flags</p>
            <div class="bento-preview" id="bentoPreviewAlert"></div>
            <span class="bento-cta">Explore &rarr;</span>
          </div>
        </div>
        <!-- Bridge — full bottom width -->
        <div class="bento-pane bento-bridge" data-cat="bridge">
          <div class="bento-glow"></div>
          <div class="bento-accent"></div>
          <canvas class="bento-viz" id="vizBridge"></canvas>
          <div class="bento-inner">
            <div class="bento-top">
              <span class="bento-icon">&#8644;</span>
              <span class="bento-count" id="bentoCountBridge" data-target="3">0</span>
            </div>
            <h3 class="bento-label">Bridge</h3>
            <p class="bento-desc">Connecting the dots — linking signals to alerts</p>
            <div class="bento-preview" id="bentoPreviewBridge"></div>
            <span class="bento-cta">Explore &rarr;</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ── Detail view (shown after zoom) ── -->
    <div class="whispers-detail" id="whispersDetail" style="display:none;">
      <button class="whisper-back" id="whisperBack">&larr; Back to Whispers</button>
      <div class="whispers-detail-header" id="whispersDetailHeader">
        <span class="whisper-detail-icon" id="whisperDetailIcon"></span>
        <h2 class="whisper-detail-title" id="whisperDetailTitle"></h2>
      </div>
      <div class="whisper-grid" id="whisperGrid"></div>
    </div>
  </section>

  <!-- ── Whisper Expand Modal ── -->
  <div class="modal" id="whisperModal" style="display:none;">
    <div class="modal-content whisper-modal-content">
      <div class="modal-header" id="whisperModalHeader">
        <div class="whisper-modal-badge" id="whisperModalBadge">SIGNAL</div>
        <h3 id="whisperModalTitle">Insight</h3>
        <button class="modal-close" id="whisperModalClose">&times;</button>
      </div>
      <div class="modal-body">
        <p class="whisper-modal-text" id="whisperModalText"></p>
        <div class="whisper-modal-summary">
          <h4>Summary</h4>
          <p id="whisperModalSummary"></p>
        </div>
        <div class="whisper-modal-questions" id="whisperModalQuestions">
          <h4>Ask about this insight</h4>
          <div class="whisper-questions-list" id="whisperQuestionsList"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ══════════ MODALS ══════════ -->
  <div class="modal" id="archiveModal" style="display:none;">
    <div class="modal-content">
      <div class="modal-header"><h3 id="modalTitle">Archive detail</h3><button class="modal-close" id="modalClose">&times;</button></div>
      <div class="modal-body">
        <div class="modal-section"><h4>Transcript</h4><div class="transcript-container" id="transcriptContainer"><p class="transcript-text" id="transcriptText">Loading...</p></div></div>
        <div class="modal-section"><h4>Summary</h4><div class="summary-container" id="summaryContainer"><p class="summary-text" id="summaryText">Loading...</p></div></div>
        <div class="modal-section"><h4>Audio player</h4><audio controls id="audioPlayer" class="audio-player"></audio></div>
      </div>
    </div>
  </div>


  <div class="modal" id="createModal" style="display:none;">
    <div class="modal-content create-modal">
      <div class="modal-header"><h3>Create new archive</h3><button class="modal-close" id="createModalClose">&times;</button></div>
      <div class="modal-body">
        <form id="createArchiveForm">
          <div class="form-group"><label>Archive title</label><input type="text" id="archiveTitle" placeholder="e.g., The Twenty Minute VC" required /></div>
          <div class="form-group"><label>Category</label>
            <select id="archiveCategory" required>
              <option value="">Select category</option>
              <option value="STARTUP / VC">Startup / VC</option>
              <option value="HEALTH / SCIENCE">Health / Science</option>
              <option value="CULTURE / SOCIETY">Culture / Society</option>
              <option value="BUSINESS">Business</option>
              <option value="TECHNOLOGY">Technology</option>
              <option value="EDUCATION">Education</option>
            </select>
          </div>
          <div class="form-group"><label>Host / Creator</label><input type="text" id="archiveHost" placeholder="e.g., Harry Stebbings" required /></div>
          <div class="form-group"><label>Upload audio file</label><input type="file" id="modalAudioInput" accept="audio/*" required /></div>
          <button type="submit" class="create-btn">Create archive</button>
        </form>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
